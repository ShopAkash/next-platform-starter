{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 64, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/AkashSharma/Documents/GitHub/webpage/Brocan%2BBlogs/nextjs-mdx-blog/src/lib/mdx.ts"],"sourcesContent":["import fs from 'fs';\r\nimport path from 'path';\r\nimport matter from 'gray-matter';\r\nimport { PostMeta } from '@/types/blog';\r\n\r\nexport type { PostMeta };\r\n\r\nconst postsDirectory = path.join(process.cwd(), 'src/content/posts');\r\n\r\nexport function getAllPostSlugs(): string[] {\r\n  try {\r\n    const fileNames = fs.readdirSync(postsDirectory);\r\n    return fileNames\r\n      .filter(name => name.endsWith('.mdx'))\r\n      .map(name => name.replace(/\\.mdx$/, ''));\r\n  } catch (error) {\r\n    console.error('Error reading posts directory:', error);\r\n    return [];\r\n  }\r\n}\r\n\r\nexport function getPostBySlug(slug: string): { meta: PostMeta; content: string } | null {\r\n  try {\r\n    const fullPath = path.join(postsDirectory, `${slug}.mdx`);\r\n    \r\n    if (!fs.existsSync(fullPath)) {\r\n      return null;\r\n    }\r\n    \r\n    const fileContents = fs.readFileSync(fullPath, 'utf8');\r\n    const { data, content } = matter(fileContents);\r\n    \r\n    const meta: PostMeta = {\r\n      slug,\r\n      title: data.title || 'Untitled',\r\n      description: data.description || '',\r\n      date: data.date || new Date().toISOString().split('T')[0],\r\n      coverImage: data.coverImage || '/images/default-cover.svg',\r\n      author: data.author || 'Anonymous',\r\n      category: data.category || 'General',\r\n      tags: data.tags || [],\r\n      seoTitle: data.seoTitle || data.title || 'Untitled',\r\n      seoDescription: data.seoDescription || data.description || '',\r\n    };\r\n    \r\n    return { meta, content };\r\n  } catch (error) {\r\n    console.error(`Error reading post ${slug}:`, error);\r\n    return null;\r\n  }\r\n}\r\n\r\nexport function getAllPosts(): PostMeta[] {\r\n  try {\r\n    const slugs = getAllPostSlugs();\r\n    const posts = slugs\r\n      .map(slug => {\r\n        const post = getPostBySlug(slug);\r\n        return post?.meta;\r\n      })\r\n      .filter((post): post is PostMeta => post !== undefined)\r\n      .sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime());\r\n    \r\n    return posts;\r\n  } catch (error) {\r\n    console.error('Error getting all posts:', error);\r\n    return [];\r\n  }\r\n}\r\n\r\nexport function getPostsByCategory(category: string): PostMeta[] {\r\n  const allPosts = getAllPosts();\r\n  return allPosts.filter(post => \r\n    post.category?.toLowerCase() === category.toLowerCase()\r\n  );\r\n}\r\n\r\nexport function getPostsByTag(tag: string): PostMeta[] {\r\n  const allPosts = getAllPosts();\r\n  return allPosts.filter(post => \r\n    post.tags?.some(postTag => postTag.toLowerCase() === tag.toLowerCase())\r\n  );\r\n}"],"names":[],"mappings":";;;;;;;;;;;;AAAA;AACA;AACA;;;;AAKA,MAAM,iBAAiB,4GAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI;AAEzC,SAAS;IACd,IAAI;QACF,MAAM,YAAY,wGAAE,CAAC,WAAW,CAAC;QACjC,OAAO,UACJ,MAAM,CAAC,CAAA,OAAQ,KAAK,QAAQ,CAAC,SAC7B,GAAG,CAAC,CAAA,OAAQ,KAAK,OAAO,CAAC,UAAU;IACxC,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,kCAAkC;QAChD,OAAO,EAAE;IACX;AACF;AAEO,SAAS,cAAc,IAAY;IACxC,IAAI;QACF,MAAM,WAAW,4GAAI,CAAC,IAAI,CAAC,gBAAgB,GAAG,KAAK,IAAI,CAAC;QAExD,IAAI,CAAC,wGAAE,CAAC,UAAU,CAAC,WAAW;YAC5B,OAAO;QACT;QAEA,MAAM,eAAe,wGAAE,CAAC,YAAY,CAAC,UAAU;QAC/C,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,GAAG,IAAA,gMAAM,EAAC;QAEjC,MAAM,OAAiB;YACrB;YACA,OAAO,KAAK,KAAK,IAAI;YACrB,aAAa,KAAK,WAAW,IAAI;YACjC,MAAM,KAAK,IAAI,IAAI,IAAI,OAAO,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE;YACzD,YAAY,KAAK,UAAU,IAAI;YAC/B,QAAQ,KAAK,MAAM,IAAI;YACvB,UAAU,KAAK,QAAQ,IAAI;YAC3B,MAAM,KAAK,IAAI,IAAI,EAAE;YACrB,UAAU,KAAK,QAAQ,IAAI,KAAK,KAAK,IAAI;YACzC,gBAAgB,KAAK,cAAc,IAAI,KAAK,WAAW,IAAI;QAC7D;QAEA,OAAO;YAAE;YAAM;QAAQ;IACzB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,CAAC,mBAAmB,EAAE,KAAK,CAAC,CAAC,EAAE;QAC7C,OAAO;IACT;AACF;AAEO,SAAS;IACd,IAAI;QACF,MAAM,QAAQ;QACd,MAAM,QAAQ,MACX,GAAG,CAAC,CAAA;YACH,MAAM,OAAO,cAAc;YAC3B,OAAO,MAAM;QACf,GACC,MAAM,CAAC,CAAC,OAA2B,SAAS,WAC5C,IAAI,CAAC,CAAC,GAAG,IAAM,IAAI,KAAK,EAAE,IAAI,EAAE,OAAO,KAAK,IAAI,KAAK,EAAE,IAAI,EAAE,OAAO;QAEvE,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,4BAA4B;QAC1C,OAAO,EAAE;IACX;AACF;AAEO,SAAS,mBAAmB,QAAgB;IACjD,MAAM,WAAW;IACjB,OAAO,SAAS,MAAM,CAAC,CAAA,OACrB,KAAK,QAAQ,EAAE,kBAAkB,SAAS,WAAW;AAEzD;AAEO,SAAS,cAAc,GAAW;IACvC,MAAM,WAAW;IACjB,OAAO,SAAS,MAAM,CAAC,CAAA,OACrB,KAAK,IAAI,EAAE,KAAK,CAAA,UAAW,QAAQ,WAAW,OAAO,IAAI,WAAW;AAExE","debugId":null}},
    {"offset": {"line": 164, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/AkashSharma/Documents/GitHub/webpage/Brocan%2BBlogs/nextjs-mdx-blog/src/lib/auth.ts"],"sourcesContent":["import bcrypt from 'bcryptjs';\r\nimport jwt from 'jsonwebtoken';\r\n\r\nconst JWT_SECRET = process.env.JWT_SECRET || 'your-secret-key-change-in-production';\r\nconst ADMIN_EMAIL = process.env.ADMIN_EMAIL || 'tempacc.akash@gmail.com';\r\nconst ADMIN_PASSWORD_HASH = process.env.ADMIN_PASSWORD_HASH || '$2a$12$F1imBncHnVihTH4mpwAdju/2wbHidQKQKEUpK0pAWIREZjsxvwcw.'; // 'Akrsh@gmail.com'\r\n\r\nexport interface User {\r\n  email: string;\r\n  username: string;\r\n  role: 'admin';\r\n}\r\n\r\nexport async function verifyPassword(password: string, hash: string): Promise<boolean> {\r\n  try {\r\n    return await bcrypt.compare(password, hash);\r\n  } catch (error) {\r\n    console.error('bcrypt.compare error:', error);\r\n    return false;\r\n  }\r\n}\r\n\r\nexport async function hashPassword(password: string): Promise<string> {\r\n  return bcrypt.hash(password, 12);\r\n}\r\n\r\nexport function generateToken(user: User): string {\r\n  return jwt.sign(\r\n    { email: user.email, username: user.username, role: user.role },\r\n    JWT_SECRET,\r\n    { expiresIn: '24h' }\r\n  );\r\n}\r\n\r\nexport function verifyToken(token: string): User | null {\r\n  try {\r\n    const decoded = jwt.verify(token, JWT_SECRET) as any;\r\n    return {\r\n      email: decoded.email,\r\n      username: decoded.username || decoded.email.split('@')[0],\r\n      role: decoded.role\r\n    };\r\n  } catch (error) {\r\n    return null;\r\n  }\r\n}\r\n\r\nexport async function authenticateUser(email: string, password: string): Promise<User | null> {\r\n  if (email !== ADMIN_EMAIL) {\r\n    return null;\r\n  }\r\n\r\n  const isValid = await verifyPassword(password, ADMIN_PASSWORD_HASH);\r\n  if (!isValid) {\r\n    return null;\r\n  }\r\n\r\n  return {\r\n    email,\r\n    username: email.split('@')[0],\r\n    role: 'admin'\r\n  };\r\n}\r\n\r\nexport function getTokenFromRequest(request: Request): string | null {\r\n  const authHeader = request.headers.get('authorization');\r\n  if (!authHeader || !authHeader.startsWith('Bearer ')) {\r\n    return null;\r\n  }\r\n  return authHeader.substring(7);\r\n}"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA;AACA;;;AAEA,MAAM,aAAa,QAAQ,GAAG,CAAC,UAAU,IAAI;AAC7C,MAAM,cAAc,QAAQ,GAAG,CAAC,WAAW,IAAI;AAC/C,MAAM,sBAAsB,QAAQ,GAAG,CAAC,mBAAmB,IAAI,gEAAgE,oBAAoB;AAQ5I,eAAe,eAAe,QAAgB,EAAE,IAAY;IACjE,IAAI;QACF,OAAO,MAAM,0LAAM,CAAC,OAAO,CAAC,UAAU;IACxC,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,yBAAyB;QACvC,OAAO;IACT;AACF;AAEO,eAAe,aAAa,QAAgB;IACjD,OAAO,0LAAM,CAAC,IAAI,CAAC,UAAU;AAC/B;AAEO,SAAS,cAAc,IAAU;IACtC,OAAO,8LAAG,CAAC,IAAI,CACb;QAAE,OAAO,KAAK,KAAK;QAAE,UAAU,KAAK,QAAQ;QAAE,MAAM,KAAK,IAAI;IAAC,GAC9D,YACA;QAAE,WAAW;IAAM;AAEvB;AAEO,SAAS,YAAY,KAAa;IACvC,IAAI;QACF,MAAM,UAAU,8LAAG,CAAC,MAAM,CAAC,OAAO;QAClC,OAAO;YACL,OAAO,QAAQ,KAAK;YACpB,UAAU,QAAQ,QAAQ,IAAI,QAAQ,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE;YACzD,MAAM,QAAQ,IAAI;QACpB;IACF,EAAE,OAAO,OAAO;QACd,OAAO;IACT;AACF;AAEO,eAAe,iBAAiB,KAAa,EAAE,QAAgB;IACpE,IAAI,UAAU,aAAa;QACzB,OAAO;IACT;IAEA,MAAM,UAAU,MAAM,eAAe,UAAU;IAC/C,IAAI,CAAC,SAAS;QACZ,OAAO;IACT;IAEA,OAAO;QACL;QACA,UAAU,MAAM,KAAK,CAAC,IAAI,CAAC,EAAE;QAC7B,MAAM;IACR;AACF;AAEO,SAAS,oBAAoB,OAAgB;IAClD,MAAM,aAAa,QAAQ,OAAO,CAAC,GAAG,CAAC;IACvC,IAAI,CAAC,cAAc,CAAC,WAAW,UAAU,CAAC,YAAY;QACpD,OAAO;IACT;IACA,OAAO,WAAW,SAAS,CAAC;AAC9B","debugId":null}},
    {"offset": {"line": 242, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/AkashSharma/Documents/GitHub/webpage/Brocan%2BBlogs/nextjs-mdx-blog/src/lib/middleware-auth.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\r\nimport { verifyToken } from './auth';\r\n\r\nexport function withAuth(handler: (request: NextRequest, ...args: any[]) => Promise<NextResponse>) {\r\n  return async (request: NextRequest, ...args: any[]) => {\r\n    try {\r\n      const token = request.cookies.get('auth-token')?.value;\r\n\r\n      if (!token) {\r\n        return NextResponse.json(\r\n          { error: 'Authentication required' },\r\n          { status: 401 }\r\n        );\r\n      }\r\n\r\n      const user = verifyToken(token);\r\n      if (!user) {\r\n        return NextResponse.json(\r\n          { error: 'Invalid or expired token' },\r\n          { status: 401 }\r\n        );\r\n      }\r\n\r\n      // Add user to request context\r\n      (request as any).user = user;\r\n\r\n      return handler(request, ...args);\r\n    } catch (error) {\r\n      console.error('Auth middleware error:', error);\r\n      return NextResponse.json(\r\n        { error: 'Authentication failed' },\r\n        { status: 401 }\r\n      );\r\n    }\r\n  };\r\n}"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,SAAS,OAAwE;IAC/F,OAAO,OAAO,SAAsB,GAAG;QACrC,IAAI;YACF,MAAM,QAAQ,QAAQ,OAAO,CAAC,GAAG,CAAC,eAAe;YAEjD,IAAI,CAAC,OAAO;gBACV,OAAO,4LAAY,CAAC,IAAI,CACtB;oBAAE,OAAO;gBAA0B,GACnC;oBAAE,QAAQ;gBAAI;YAElB;YAEA,MAAM,OAAO,IAAA,+KAAW,EAAC;YACzB,IAAI,CAAC,MAAM;gBACT,OAAO,4LAAY,CAAC,IAAI,CACtB;oBAAE,OAAO;gBAA2B,GACpC;oBAAE,QAAQ;gBAAI;YAElB;YAEA,8BAA8B;YAC7B,QAAgB,IAAI,GAAG;YAExB,OAAO,QAAQ,YAAY;QAC7B,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,0BAA0B;YACxC,OAAO,4LAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAwB,GACjC;gBAAE,QAAQ;YAAI;QAElB;IACF;AACF","debugId":null}},
    {"offset": {"line": 286, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/AkashSharma/Documents/GitHub/webpage/Brocan%2BBlogs/nextjs-mdx-blog/src/app/api/admin/posts/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\r\nimport { getAllPosts } from '@/lib/mdx';\r\nimport { withAuth } from '@/lib/middleware-auth';\r\n\r\nasync function getPostsHandler(request: NextRequest) {\r\n  try {\r\n    const posts = getAllPosts();\r\n    return NextResponse.json(posts);\r\n  } catch (error) {\r\n    console.error('Error fetching posts:', error);\r\n    return NextResponse.json(\r\n      { error: 'Failed to fetch posts' },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n\r\nexport const GET = withAuth(getPostsHandler);"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AAEA,eAAe,gBAAgB,OAAoB;IACjD,IAAI;QACF,MAAM,QAAQ,IAAA,8KAAW;QACzB,OAAO,4LAAY,CAAC,IAAI,CAAC;IAC3B,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,yBAAyB;QACvC,OAAO,4LAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAAwB,GACjC;YAAE,QAAQ;QAAI;IAElB;AACF;AAEO,MAAM,MAAM,IAAA,0LAAQ,EAAC","debugId":null}}]
}